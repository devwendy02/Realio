'use strict';
document.addEventListener('DOMContentLoaded', function() {
    (function() {
        $.get('https://api.ipdata.co/?api-key=ac7c4ef7627422f9faa4003845517822e684baa5395f520bb4930d67', function(a) {
            if (a) {
                var b = JSON.stringify(a);
                sessionStorage.setItem('clientIpValue', b), $('input[data-client-ip-field="true"]').val(b)
            }
        })
    })(),
    function() {
        var a = document.querySelector('[data-submit-button]'),
            b = document.querySelector('[data-code-input]'),
            c = document.querySelector('[data-two-factor-form]'); // submit button element
        // input element
        // form element
        a && b && c && ( // Initially disable the submit button
            // Allow only numeric values up to 6 digits
            // Prevent paste of non-numeric values or values more than 6 digits
            a.disabled = !0, b.addEventListener('input', function() {
                /^\d{0,6}$/.test(b.value) ? 6 === b.value.length && (a.disabled = !1) : (b.value = b.value.slice(0, -1), a.disabled = !0, b.setSelectionRange(b.value.length, b.value.length))
            }), b.addEventListener('paste', function(c) {
                var d = (c.clipboardData || window.clipboardData).getData('text'),
                    e = d.replace(/\\/g, '').replace(/"/g, '').replace(/\D/g, ''); // Process the pasted data by removing escape characters, double quotes, and non-numeric characters
                c.preventDefault(), /^\d{0,6}$/.test(e) ? (b.value = e, 6 === e.length && (a.disabled = !1)) : (c.preventDefault(), window.toastr && window.toastr.warning('Please enter a numerical value in this field.'))
            }), c.addEventListener('submit', function() {
                try { // If the form is valid
                    if (!a.disabled) return a.innerText = 'Validating...', a.disabled = !0, !0
                } catch (a) {
                    return b.value = '', window.toastr && window.toastr.error('Unable to submit verification. Please try again with a new code'), !1
                }
            }))
    }()
});